# ==============================================
#  Dockge / Docker Compose 共用變數
# ==============================================
# 請務必設定強密碼，這會同時用在資料庫容器初始化與後端連線。
# [重要] 這些密碼請設定為獨一無二的隨機字串。
DB_ROOT_PASSWORD="請在此輸入您的Root密碼_務必修改"
DB_USER="prod_user" # 建議正式環境使用非 root 帳號
DB_NAME="chack" # 資料庫名稱

# ==============================================
#  後端應用程式設定 (FastAPI)
# ==============================================

# [安全性 - 必改] JWT Token 的密鑰。請務必修改為一長串隨機亂碼！
# 可用指令生成: openssl rand -hex 32
SECRET_KEY="請務必修改這裡_CHANGE_THIS_TO_RANDOM_STRING_FOR_PRODUCTION"

# JWT Token 加密算法 (保持預設即可)
ALGORITHM="HS256"

# [修改] JWT Access Token 過期時間 (分鐘)
# 設定為 60 分鐘即可，因為我們有下方的滑動機制會自動續命
ACCESS_TOKEN_EXPIRE_MINUTES=60

# [新增] 滑動換票門檻 (分鐘)
# 當 Token 剩餘時間少於此數值 (例如剩 30 分鐘) 時，系統會自動發一張新票
SLIDING_REFRESH_THRESHOLD_MINUTES=30

# [資料庫連線] FastAPI 後端連線到資料庫的 URL。
# 格式: mysql+aiomysql://使用者:密碼@資料庫服務名稱:埠號/資料庫名稱
# 注意: Docker Compose 會自動替換 ${DB_USER} 等變數，這裡保持原樣即可
SQLALCHEMY_DATABASE_URL="mysql+aiomysql://${DB_USER}:${DB_ROOT_PASSWORD}@db:3306/${DB_NAME}"

# [安全性 - 必改] 初始管理員帳號。系統第一次啟動時會自動建立此帳號。
# 部署後請務必立即透過管理介面修改此帳號的密碼！
FIRST_SUPERUSER="admin"
FIRST_SUPERUSER_PASSWORD="請修改您的管理員初始密碼"

# [安全性 - 必改] FastAPI Debug 模式 (生產環境務必設為 False)
DEBUG=False

# 上傳檔案的目錄名稱 (對應容器內的掛載路徑)
UPLOAD_DIR="uploads"

# [網域設定 - 重要] 後端對外公開的 HTTPS 網址 (無結尾斜線)。
# 例如: https://api.yourdomain.com
API_BASE_URL="https://your.api.domain.com"

# [安全性 - 重要] CORS (跨域資源共享) 設定。
# 必須包含所有允許存取您後端 API 的前端網址 (通常是您的前端網域)。
# 格式為 JSON 列表。生產環境請勿使用 ["*"]。
BACKEND_CORS_ORIGINS='["${API_BASE_URL}", "https://dorm.yourdomain.com", "http://localhost:3000"]'

# ==============================================
#  前端應用程式設定 (Nuxt 3)
# ==============================================

# [重要] Nuxt 3 前端在瀏覽器端呼叫後端 API 的完整 URL。
# 請將 API_BASE_URL 替換為前端實際使用的後端網址。
NUXT_PUBLIC_API_BASE="${API_BASE_URL}/api/v1"

# Nuxt 執行環境 (生產環境務必設為 production)
NODE_ENV="production"

# ==============================================
#  郵件設定 (Email - 選填)
# ==============================================
# 若需要「忘記密碼」或「通知信」功能，請填入真實 SMTP 資訊 (如 Gmail)。
# 若暫不使用，可留空，但相關功能會失效。
MAIL_USERNAME=""
MAIL_PASSWORD=""
MAIL_FROM="noreply@yourdomain.com"
MAIL_PORT=587
MAIL_SERVER="smtp.gmail.com"
MAIL_TLS=True
MAIL_SSL=False

# ==============================================
#  專案資訊 (選填)
# ==============================================
PROJECT_NAME="Dormitory Inspection System"
PROJECT_VERSION="1.0.0"
API_V1_STR="/api/v1"
